**схема подключения акселерометра**

с одной стороны видим разьем под вайфай модуль на плате принтера, с другой акселерометр

![adxl345](/klipperFB6/assets/images/adxl345_2_mcu/adxl345.jpg)

разместить можно на фидере используя данное [крепление](/klipperFB6/assets/stl/adxl345_2_mcu/adxl.stl)  или это [крепление](/klipperFB6/assets/stl/adxl345_2_mcu/adxl2.stl)  

для установки рекомендую схему как на фото

![tool](/klipperFB6/assets/images/adxl345_2_mcu/tool.jpg)

или  вариант 2

![вариант2](/klipperFB6/assets/images/adxl345_2_mcu/v2_1.jpg)

в ```printer.cfg``` добавить
```cfg
[adxl345]

cs_pin: PC15

axes_map: -x,z,-y  # тут возможно придется править под ваше расположение осей

spi_software_sclk_pin: PB13

spi_software_mosi_pin: PC3

spi_software_miso_pin: PC2

[resonance_tester]

accel_chip: adxl345

probe_points:
  100, 100, 20
```


Проверка настройки

Теперь вы можете проверить соединение.
 введите в консоли `ACCELEROMETER_QUERY`
Вы должны увидеть текущие измерения акселерометра, включая ускорение свободного падения, например
```
Recv: // adxl345 values (x, y, z): 470.719200, 941.438400, 9728.196800
```
Если вы получаете сообщение об ошибке, например `Invalid adxl345 id (got xx vs e5)`, где xx какой-то другой идентификатор, это указывает на проблему с подключением к ADXL345 или на неисправный датчик. Дважды проверьте питание, проводку (соответствие схеме, отсутствие оборванных или ослабленных проводов и т. д.) и качество пайки. 

Затем попробуйте запустить `MEASURE_AXES_NOISE` в консоли, вы должны получить некоторые базовые значения шума акселерометра на осях (должен быть где-то в диапазоне ~ 1-100). Слишком высокий шум по осям (например, 1000 и более) может свидетельствовать о проблемах с датчиком, проблемах с его питанием или о слишком шумных несбалансированных вентиляторах 3D-принтера.

сам акселерометр брал [тут](http://alii.pub/6hx40w) 
